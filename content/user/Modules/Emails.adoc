---
Title: Emails
Weight: 140
---
:experimental:   ////this is here to allow btn:[]syntax used below

:imagesdir: ./../../../images/en/user

:toc:

= Emails

{{% notice note %}}
This documentation is for *SuiteCRM* versions 7.9.x and later. For earlier versions of *SuiteCRM*, please see link:../emails-lts/[Emails-LTS].
{{% /notice %}}

{{%notice warning %}}If you are upgrading from a version of *SuiteCRM* prior to 7.9.x, please see the <<Upgrading, Upgrading>> section of this document.{{% /notice%}}

== Overview

The *Emails* module in *SuiteCRM* allows Users to view, store, compose, send and receive email from their own personal email account or a shared inbox, for example a Support or Sales inbox. 
Emails can be imported and associated with a related *SuiteCRM* record, for example a Contact or an Account. These related emails can then be viewed on the history subpanel of the related record.

See link:../email-settings[Email Settings] for information on mail configuration for *SuiteCRM*.

{{% notice note %}}
You will need to set up and have access to at least one *personal* or *group* email account in order to use the *Emails* module. See link:../email-settings[Email Settings] for information on mail configuration for *SuiteCRM*.
{{% /notice %}}

The *Emails* Module can be found on the *All* menu on the top navigation bar. The module opens in List View, showing all the the mail from the default mail account inbox in the main window. 

image:250EmailsListView.png[title="Emails Module List View"]

The current inbox name is displayed on the button to the top right-hand side of the list view. Use this button to switch between accounts or other monitored folders.

Unread emails have a purple highlight.

[cols = "10,90",frame="none", grid="none" ]
|===
|image:257EmailsImportedIcon.png[title="Imported mail icon"]|Emails which have been <<Import Mail,imported>> into *SuiteCRM* are indicated by a tick.
|image:258EmailsFlaggedIcon.png[title="Flagged mail icon"]|Emails which have been flagged for follow up are indicated by an exclamation mark.
|===

As in other *SuiteCRM* modules, emails can be sorted by clicking on the column headings. Filter and column selections can also be made in the same way as for other modules.

The main actions for the *Emails* module are contained within the buttons on the *Emails* toolbar. Hover over these buttons to see the explanatory tooltip for each function.

[cols="15,10,75",frame="none", grid="none"]
|===
|image:253EmailsBulkAction.png[title="Bulk Action button"]|*Bulk Action*|Use the Bulk Action dropdown to bulk <<Import Mail,import mail>>, to mark mail as read/unread or to flag mail for follow up. Multiple emails can be selected in list view using the checkboxes.
|image:252EmailsComposebutton.png[title="Compose Mail button"]|*Compose Mail* |Opens the <<Compose Mail, Compose>> window to create a new message.
|image:254EmailsSettingsButton.png[title="Mail Settings button"]|*Settings*|Shortcut to your user profile where you can edit your <<User Profile Email Settings, mail settings>>.  Add and remove accounts and select folders to view here.
|image:255EmailsCheckForMailButton.png[title="Check for Mail button"]|*Check For Mail*| For personal email accounts, you can check for new mail with this button . Note that for Group email accounts, checking for email is done automatically via the *Check Inbound Mailboxes* Scheduler. You will need to ensure that your cron settings are correct for the scheduler to run. Please see link for further information on Schedulers.
|image:256EmailsChangeFolderButton.png[title="Select Folder button"]|*Select Folder*|This allows you to select which monitored folder you wish to view. If you have more than one account set up, you can also switch between accounts with this button. Expanding an account in the list will show all the monitored folders for the account. Select the required folder.
|===

=== Read Mail

Click on the subject line of an email to open it in *Detail* view. Use the *Actions* menu to reply to, forward or <<Import Mail,import>> the email.
image:269EmailsActionMenu.png[title="Action menu"]

=== Compose Mail

Click the Compose Mail button or select *Compose* from the *Sidebar* to open a new compose window. 

Emails can also be composed directly from a *SuiteCRM* record by clicking the email address on the record. This will open compose view in the *Emails* module. For new emails opened in this way, the *To:* field will be automatically populated and the email will related to the relevant record. 

{{% notice note %}}If you have opted to use an external email client in your <<User Profile Email Settings, user profile email settings>>, clicking an email address on a record in *SuiteCRM* will open a new email in your chosen editor.
{{% /notice %}}

image:260Emailcompose.png[title="Compose Email"]

* *Email Template:* Select a template if required. See <<Email Templates>> for more information on creating and editing email templates. Once you have selected a template, a popup will warn you that the subject line and body of the email will be replaced by the contents of the email template. If you are using a template with variables, these will be populated with the relevant data from the related record when the email is sent. The *To:* field will also be automatically populated with the email address associated with the related record.

// image:261EmailsAddtemplate.png[title="Adding Email template warning"]

* *Related To:* To associate the email with a particular record, select the module (e.g. Accounts, Contacts, Leads) and then click the Search arrow to search for the record. Alternatively, you can begin typing the name into the field and select the relevant record from the auto-complete list which appears.

* *From:* If you have more than one email account configured, select the account from which to send the email. The *Reply To* and *From* settings for the selected account are displayed alongside for information.

* *To:* Selecting a related record in the with a valid email address will automatically populate the *To:* field. Alternatively, the *To:*, *Cc:* and *Bcc:* fields can be populated manually or via the select buttons which appear when you click inside the fields.

* *Body:*  If you have configured a signature for this account in your <<User Mail Settings - General Tab, user profile email settings>>, this will appear automatically in the body of the email.

The toolbar at the bottom of the Compose view has the following buttons:

[cols="10,10,80",frame="none", grid="none"]
|===
|image:263EmailsSendMailbutton.png[title="Send Mail button"]|*Send Mail* |A confirmation message will appear when the message has been sent.
|image:264EmailsAddFilesbutton.png[title="Add Files button"]|*Attach Files*| Use this button to browse for and attach an *external* file to the email.
|image:265EmailsAddDocumentsbutton.png[title="Add Documents button"]|*Attach Documents*|Use this button to attach a *SuiteCRM Document* to the email. Search for the required Document in the popup and click btn:[SELECT] to attach it.
|image:266EmailsSaveDraftbutton.png[title="Save Draft button"]|*Save Draft*|Drafts can be viewed by <<Select Folder, changing the folder>> in *List* view.
|image:267EmailsDiscardbutton.png[title="Discard button"]|*Discard*|Discards the draft email without sending.
|===

=== Import Mail

Email can be imported into *SuiteCRM* and associated with a relevant *SuiteCRM* record (e.g. a contact or account record). This can be very useful in keeping a history of communication with a client, for example.
Emails which have been imported and related to a record in *SuiteCRM* can be viewed from the record's history subpanel.

==== Import Single Email

An individual email can be imported from *Detail* view. Open the email, and then select *Import* from the *Actions* dropdown menu.

image:268bEmailsImport.png[title="Import emails"]

==== Import One or More Emails

One or more emails can be imported at the same time from *List* view. Select the email(s) you wish to import using the checkboxes to the left-hand side of the view. Select *Import* from the *Bulk Action* menu.

image:268aEmailsImport.png[title="Import emails"]

On importing, a dialog will open allowing you to select which record to relate the email(s) to. 

image:268EmailsImportDialog.png[title="Import emails"]

First select the module type from the drop-down.  Now use the search arrow button to find and select the relevant record, or begin typing the name into the field and select the required record from the auto-complete list. Click the btn:[OK] button.

Note that if you are bulk importing mail, all emails will be related to the record selected here. If you need to relate mail to different records you will need to import these individually.

*SuiteCRM* can also be configured to automatically import emails for group mail accounts. See <<Setting up A Group Email Account, Group Email Accounts>> for more information.

=== Delete Mail
As only imported emails are stored in *SuiteCRM*, only imported email records can be deleted from the *Emails* module. 

To delete an imported email record, open the email and then select Delete from the Actions menu dropdown. Note that this will only delete the SuiteCRM record and not the imap message. To remove emails from the Emails module, you will need to move or delete them using your external mail client.


== Email Templates

Email templates are used to send standardised responses and notifications via email. Adding variables allows you to personalise these communications and include additional relevant information such as order details.

From *SuiteCRM* 7.9.x onwards, email templates can be viewed, edited and created from the *Email Templates* module which can be found on the *All* menu. Alternatively, templates can be created by the user directly from the workflow and campaigns modules.

{{% notice tip %}}The template editor used for creating and editing email templates can be selected in the link:../email-settings/#_user_profile_email_settings[user profile email settings]. The default setting is Mosaik, which is shown in the following screen shots. {{% /notice %}}

image:300EmailsTemplates.png[Email Templates] 

There are a number of default *System* templates which are created on install. These are used to send out system notifications such as new passwords or case updates. These can be viewed and edited here alongside user-generated templates. Templates created here can also be used in link:../advanced-open-workflow[Workflows] and link:../campaigns[Campaigns] for example, as well as for system notifications.

Click on a template name to view the template. 

To edit an existing template, either open the template and select *Edit* from the *Actions* menu, or click the pencil icon to the left of the template name. Once in *Edit* mode, the template can be edited in the same way as <<Creating a template, creating a template>>, below.

=== Creating an Email Template

Select *Create Email Template* from the sidebar. This Create view will also appear if you choose to create a template from within another module such as link:../advanced-open-workflow[Workflows], for example. Select *Email*, *Campaign* or *System* depending on the use for the template. *System* templates are used to send system generated notifications such as case updates.

image:301EmailsNewTemplate.png[New email template]

==== Body

To add text to the body of the template, click, drag and drop one of the layouts from the selection in the left-hand pane into the onto the body. You can add as many layout sections as required. Overwrite the demo text by first highlighting it.

==== Adding Variables
To add a variable, select the appropriate module and field name from the drop-down lists. The corresponding variable name will be displayed in the last field.

image:302EmailsInsertVariable.png[Insert template variable]

You can either enter this variable manually, or click btn:[ADD VARIABLE] to insert the variable at the cursor point. Variables can be added to the subject line as well as the body of the email template.

image:303EmailsInsertVariable2.png[Template variable in subject and body]


==== Attachments

[cols="20,80",frame="none", grid="none"]
|===
|image:304EmailsTemplateAttachment.png[Template attachments]|Click btn:[BROWSE] to attach an external file or btn:[DOCUMENTS] to attach a *SuiteCRM* document to the template. Further items can be attached in the same way. The attached file(s) will be sent to all recipients of the template.
|===

==== Security Groups

Restrict access to a template by selecting a Security Group. 

== Changes To Emails Module

Prior to version 7.9, *SuiteCRM* had to synchronise the email headers before users could view them. As of version 7.9, *SuiteCRM* contacts the email server directly - retrieving only the minimal information needed to process an operation. This eliminates the synchronisation process and significantly reduces amount of email information needed to be stored in the database. Note to developers and administrators: The 'email_cache' table is deprecated in *SuiteCRM* 7.9.

=== Upgrading

If you are upgrading from a version of *SuiteCRM* prior to *7.9.x*, you will need to use the *Sync Inbound Email Account Tool* on upgrading. This tool will synchronise mail already imported into *SuiteCRM* with your current IMAP accounts so that you will not have to synchronise in the future. We recommend taking a backup of your database and instance before upgrading.

=== Sync Inbound Emails Accounts Tool

From the *Admin* panel, select *Repair* and then *Sync Inbound Email Accounts*.

This will display a multiple selection box *Mail Account Name* listing all of the the active inbound email accounts (including personal accounts) and a btn:[SYNC] button.

Select the required accounts from the multiple selection box (use ctrl + click to select more than one) and click btn:[SYNC]. The page will refresh and list the progression of the tool.

The tool goes through all the selected inbound email accounts and updates them to support new features in *SuiteCRM* 7.9 onwards:

* Connects to the email server (via IMAP)
* Downloads the email header information
* Determines the orphaned status of emails
* Updates the unique ID for each email
* Corrects synchronisation problems

If an error occurs, you can run the tool on the other accounts which are working. The details of any errors can be found in the suitecrm.log file.

